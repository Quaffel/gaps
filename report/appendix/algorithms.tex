\chapter{Algorithms}
\section{Well-placed cards} \label{appendix:algo}
\begin{lstlisting}
get_well_placed_cards(board_state) -> list[card_position]:
    rows_best_suit: list[list[card_positions]]
    for r in R:
        rows_best_suit.append([])
        for s in number_of_suits+1:
            rows_best_suit[r].append([])

    # We gather the cards placed on the correct column
    # for every row, grouped by their suits
    for every row r:
        for every column c:
            current_card <- card_at(board_state, r, c)

            # is_at_correct_column returns true if a card 
            # with rank 6 is at the column 5 for example
            if is_at_correct_column(current_card)
                # Get suit return the number the suit is mapped to (0 to 3)
                card_suit = get_suit(current_card)

                # If the card is a gap we map it to the 
                # last element in a rows_best_suit array
                if is_gap(current_card):
                    card_suit = number_of_suits
                    
                rows_best_suit[card_suit].append(current_card)

    # To determine the number of correctly placed
    # cards, for every row we picked the suit
    # that has the most well placed cards
    results: list[] = []
    for r in R:
        max_length = -infinity
        max_length_row = 0
        for s in number_of_suits+1:
            # Add to the results the well-placed cards
            # corresponding to the the suit that has the most
            # well-placed cards on the row
            if len(rows_best_suit[r][s]) > max_length:
                max_length = len(rows_best_suit[r][s])
                max_length_row = s
        add_list_to_list(rows_best_suit[max_length_row])

    return results
\end{lstlisting}
